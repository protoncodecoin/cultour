{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container-fluid custom-container">

   {% if room.featured_images.all %}
        
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            </ol>
        <div class="carousel-inner">
            {% for image in room.featured_images.all %}
                <div class="carousel-item {% if forloop.first %} active {% endif %}">
              
                <img class="d-block w-100" src="{{image.image.url}}" alt="First slide">
                </div>
                {% endfor %}
                {% comment %} <div class="carousel-item">
                <img class="d-block w-100" src=".../800x400?auto=yes&bg=666&fg=444&text=Second slide" alt="Second slide">
                </div>
                <div class="carousel-item">
                <img class="d-block w-100" src=".../800x400?auto=yes&bg=555&fg=333&text=Third slide" alt="Third slide">
                </div> {% endcomment %}
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    {% else %}
    <div class="mb-4 text-center">
        {% comment %} <img src="{{ room.image.url }}" class="img-fluid rounded" alt="Room image"> {% endcomment %}
        <p>No Featured Images </p>
    </div>
    {% endif %}

    <!-- Room Details -->
    <div class="row justify-content-md-center cs-padding cs-mrgn">
        <div class="col-lg-4">
            <div class="card shadow-sm cs-card">
            <h2>{{ room.name }}</h2>
            <p class="text-muted">Room #{{ room.room_number }} | {{ room.room_type|title }} | ₵{{ room.fee }}</p>

            <p><strong>Status:</strong> 
                {% if room.is_available %}
                    <span class="badge bg-success">Available</span>
                {% else %}
                    <span class="badge bg-danger">Unavailable</span>
                {% endif %}
            </p>

            {% if room.notes %}
            <div class="mt-3">
                <h5>Notes</h5>
                <p>{{ room.notes }}</p>
            </div>
            {% endif %}
        </div>
        </div>

        <div class="col-lg-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Quick Info</h5>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><strong>Room Type:</strong> {{ room.room_type|title }}</li>
                        <li class="list-group-item"><strong>Fee:</strong> ₵{{ room.fee }}</li>
                        <li class="list-group-item"><strong>Available:</strong> 
                            {% if room.is_available %} Yes {% else %} No {% endif %}
                        </li>
                        <li class="list-group-item"><strong>Hotel:</strong> {{ room.hotel.name }}</li>
                    </ul>
                </div>

               <div class="book-btn-container">
                 {% if room.is_available %}
                    {% comment %} <button type="button" class="btn btn-success">Book Now</button> {% endcomment %}

                    	<button type="button" class="btn btn-primary ml-auto roomID reservation__room" data-toggle="modal" data-room-id="{{ room.pk }}"data-target="#exampleModalCenter">
								Book Now
								</button>

                                    {% else %}
                    <button type="button" class="btn btn-secondary disabled">Booked</button>
                {% endif %}
               </div>
            </div>
        </div>

    </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Booking for {{table.name}}</h5>
        <button type="button" class="close btn-close first-close-btn" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
    <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center">
            Hotel
            <span style="font-size: 15px;" class="badge text-bg-primary rounded-pill">{{room.hotel.name}}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            Room Type
            <span style="font-size: 15px;" class="badge text-bg-primary rounded-pill">{{room.room_type}}</span>
        </li>
         <li class="list-group-item d-flex justify-content-between align-items-center">
            Room Name
            <span style="font-size: 15px;" class="badge text-bg-primary rounded-pill">{{room.name}}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            Price
            <span style="font-size: 15px;" class="badge text-bg-primary rounded-pill">₵{{room.fee}}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            Room Number
            <span style="font-size: 15px;" class="badge text-bg-primary rounded-pill">{{room.room_number}}</span>
        </li>
    </ul>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success save__btn" >Pay</button>
      </div>
    </div>
  </div>
</div>


</div>

{% endblock %}

{% block include_js %}
        <script>
              window.bookingInfo = {
                roomId: "{{ room_id }}",
                hotelId: "{{ hotel_id }}"
            };
        </script>
	{% block domready %}
		<script src="{% static 'js/custom/hotel_reservation.js' %}" ></script>
	{% endblock %}
	
{% endblock %}